---
slug: upload-file
title: 实现点击上传功能
description: 这只是第一天做的内容，后面我会添加新的功能
authors: bing
tags: [mongoose, express, json, formidable]
---

这是一个作业，要求是通过`http`协议传输图片，客户端要读取图片并将其转换为字节流或者`Base64`编码，在发送给服务端，目前我就是使用一个input来选择上传的图片，并没有将它转换，服务端接收到后使用formidable来解析post请求体，然后将图片保存在静态资源目录public/image目录中，并将图片的名称存入了本地的mongodb数据库。

现在react还不够熟练，当然我也是觉得这只是一个作业，我便就使用最基本的三件套来设计页面，但是现在还比较粗糙，我就不展示这些半成品代码，后面我会详细介绍。

### 2024/4/8

写了半天总觉得有点不对劲，总是写了又删，感觉不好表达，因为这只是一个半成品，昨天因为眼睛实在是太累了，我就鸽了，想着今天接着写，但是今天我又会继续向这个半成品添加新功能，导致昨天的版本已经过时，跟今天的不太一样，我这就有点为难了，如果我按照昨天的思路去写，但是我今天并没有完全按照昨天的想法来做，因为在开发的过程中，最开始使用的方法不一定好，后面都会变化的。我现在有点理解为什么要分版本了，以前不理解为什么那些文档的网站不能天天更新内容，偏要分个xx.xx.xx版本，现在才发现，天天更新是不行的。

我现在想得就是这个博客我还是天天更新，但是我不会去详细地去写我每天开发的小玩意，因为它还没有开发好。但在开发的过程中，我收获了很多，博客就写一写每天学到的东西。当我的小玩意儿真的开发好了，我会详细介绍它，详细介绍的话我将会把它写成文档，这才对嘛，博客记录生活，文档好好介绍东西。我现在之所以难受，就是我知道我现在写那些开发的东西，很可能在后面一点用都没有，不能因为为了写博客而去写博客，这样只会生产垃圾。

### 2024/4/8

{/* truncate */}

### 表单

网页结构如下：
```html title="html" showLineNumbers
<div class="section">
        <div class="container">
            <h2>上传图片</h2>
            <form method="post" action="/upload/succeed" enctype="multipart/form-data" >
                <input name="img" type="file" class="imgInput" multiple>
                <div class="border">
                    <div class="icon">+</div>
                </div>
                <button type="submit" class="submit-btn">提交</button>
            </form>
            <h2>图片预览列表</h2>
            <div class="imgList"></div>
        </div>
```

`<form method="post" action="your url" enctype="multipart/form-data">`
`<input name="img" type="file" multiple>`这个DOM对象来实现上传功能，点击它就可以从资源管理器中选择相关文件进行上传。



妈的，眼睛好累啊，明天在写了，是真的遭不住了，看屏幕都是花的，我还是不使用这个深色模式了，太难受了，我已经够忍受它的了。鸽了鸽了，我原本每天的目标就是至少写一篇博客，记录这一天都干了什么，今天实在是太累了。就算强忍着写完，质量也堪忧！！！
